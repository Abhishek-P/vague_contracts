no = props %>%
select(version,ProportionNotPassive,NotPassiveYMax,NotPassiveYMin) %>%
rename(Proportion=ProportionNotPassive,YMax=NotPassiveYMax,YMin=NotPassiveYMin) %>%
mutate(Response="not_passive")
pop_judgments = transformed %>%
group_by(version,individual_judgment) %>%
summarise(Proportion = mean(population_judgment/100), CILow=ci.low(population_judgment/100), CIHigh=ci.high(population_judgment/100)) %>%
ungroup() %>%
mutate(Response=individual_judgment,YMin=Proportion-CILow,YMax=Proportion+CIHigh) %>%
select(-individual_judgment)
responses = bind_rows(yes,no,pop_judgments) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
#ResponseType = fct_relevel(ResponseType,"individual"), #
Response = fct_relevel(Response,"passive","not passive")) # this is what I want to be
dodge=position_dodge(.9)
ggplot(responses, aes(x=Response,y=Proportion,fill=Condition)) +
geom_bar(stat="identity",position=dodge) +
geom_errorbar(aes(ymin=YMin,ymax=YMax),width=.2,position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
#scale_alpha_discrete(range = c(1, .4),name="Response type",labels=c("agreement_estimate"="agreement\nestimate")) +
ylab("Proportion of responses") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/responses.pdf",width=5,height=3.5)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive),
ProportionNotPassive = mean(not_passive), NotPassiveCILow=ci.low(not_passive), NotPassiveCIHigh=ci.high(not_passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh,
NotPassiveYMin=ProportionNotPassive-NotPassiveCILow,NotPassiveYMax=ProportionNotPassive+NotPassiveCIHigh)
yes = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
no = props %>%
select(version,ProportionNotPassive,NotPassiveYMax,NotPassiveYMin) %>%
rename(Proportion=ProportionNotPassive,YMax=NotPassiveYMax,YMin=NotPassiveYMin) %>%
mutate(Response="not_passive")
pop_judgments = transformed %>%
group_by(version) %>%
summarise(Proportion = mean(population_judgment/100), CILow=ci.low(population_judgment/100), CIHigh=ci.high(population_judgment/100)) %>%
ungroup() %>%
mutate(Response=individual_judgment,YMin=Proportion-CILow,YMax=Proportion+CIHigh) %>%
select(-individual_judgment)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive),
ProportionNotPassive = mean(not_passive), NotPassiveCILow=ci.low(not_passive), NotPassiveCIHigh=ci.high(not_passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh,
NotPassiveYMin=ProportionNotPassive-NotPassiveCILow,NotPassiveYMax=ProportionNotPassive+NotPassiveCIHigh)
yes = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
no = props %>%
select(version,ProportionNotPassive,NotPassiveYMax,NotPassiveYMin) %>%
rename(Proportion=ProportionNotPassive,YMax=NotPassiveYMax,YMin=NotPassiveYMin) %>%
mutate(Response="not_passive")
pop_judgments = transformed %>%
group_by(version) %>%
summarise(Proportion = mean(population_judgment/100), CILow=ci.low(population_judgment/100), CIHigh=ci.high(population_judgment/100)) %>%
ungroup() %>%
mutate(Response=header_passive,YMin=Proportion-CILow,YMax=Proportion+CIHigh) %>%
select(-individual_judgment)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive),
ProportionNotPassive = mean(not_passive), NotPassiveCILow=ci.low(not_passive), NotPassiveCIHigh=ci.high(not_passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh,
NotPassiveYMin=ProportionNotPassive-NotPassiveCILow,NotPassiveYMax=ProportionNotPassive+NotPassiveCIHigh)
yes = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
no = props %>%
select(version,ProportionNotPassive,NotPassiveYMax,NotPassiveYMin) %>%
rename(Proportion=ProportionNotPassive,YMax=NotPassiveYMax,YMin=NotPassiveYMin) %>%
mutate(Response="not_passive")
pop_judgments = transformed %>%
group_by(version) %>%
summarise(Proportion = mean(population_judgment/100), CILow=ci.low(population_judgment/100), CIHigh=ci.high(population_judgment/100)) %>%
ungroup() %>%
mutate(Response=individual_judgment,YMin=Proportion-CILow,YMax=Proportion+CIHigh) %>%
select(-individual_judgment)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive),
ProportionNotPassive = mean(not_passive), NotPassiveCILow=ci.low(not_passive), NotPassiveCIHigh=ci.high(not_passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh,
NotPassiveYMin=ProportionNotPassive-NotPassiveCILow,NotPassiveYMax=ProportionNotPassive+NotPassiveCIHigh)
yes = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
no = props %>%
select(version,ProportionNotPassive,NotPassiveYMax,NotPassiveYMin) %>%
rename(Proportion=ProportionNotPassive,YMax=NotPassiveYMax,YMin=NotPassiveYMin) %>%
mutate(Response="not_passive")
pop_judgments = transformed %>%
group_by(version, individual_judgment) %>%
summarise(Proportion = mean(population_judgment/100), CILow=ci.low(population_judgment/100), CIHigh=ci.high(population_judgment/100)) %>%
ungroup() %>%
mutate(Response=individual_judgment,YMin=Proportion-CILow,YMax=Proportion+CIHigh) %>%
select(-individual_judgment)
responses = bind_rows(yes,no,pop_judgments) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
#ResponseType = fct_relevel(ResponseType,"individual"), #
Response = fct_relevel(Response,"passive","not passive")) # this is what I want to be
dodge=position_dodge(.9)
ggplot(responses, aes(x=Response,y=Proportion,fill=Condition)) +
geom_bar(stat="identity",position=dodge) +
geom_errorbar(aes(ymin=YMin,ymax=YMax),width=.2,position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
#scale_alpha_discrete(range = c(1, .4),name="Response type",labels=c("agreement_estimate"="agreement\nestimate")) +
ylab("Proportion of responses") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/responses.pdf",width=5,height=3.5)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive),
ProportionNotPassive = mean(not_passive), NotPassiveCILow=ci.low(not_passive), NotPassiveCIHigh=ci.high(not_passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh,
NotPassiveYMin=ProportionNotPassive-NotPassiveCILow,NotPassiveYMax=ProportionNotPassive+NotPassiveCIHigh)
yes = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
no = props %>%
select(version,ProportionNotPassive,NotPassiveYMax,NotPassiveYMin) %>%
rename(Proportion=ProportionNotPassive,YMax=NotPassiveYMax,YMin=NotPassiveYMin) %>%
mutate(Response="not_passive")
responses = bind_rows(yes,no) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
#ResponseType = fct_relevel(ResponseType,"individual"), #
Response = fct_relevel(Response,"passive","not passive")) # this is what I want to be
dodge=position_dodge(.9)
ggplot(responses, aes(x=Response,y=Proportion,fill=Condition)) +
geom_bar(stat="identity",position=dodge) +
geom_errorbar(aes(ymin=YMin,ymax=YMax),width=.2,position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
#scale_alpha_discrete(range = c(1, .4),name="Response type",labels=c("agreement_estimate"="agreement\nestimate")) +
ylab("Proportion of responses") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/responses.pdf",width=5,height=3.5)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive),
ProportionNotPassive = mean(not_passive), NotPassiveCILow=ci.low(not_passive), NotPassiveCIHigh=ci.high(not_passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh,
NotPassiveYMin=ProportionNotPassive-NotPassiveCILow,NotPassiveYMax=ProportionNotPassive+NotPassiveCIHigh)
yes = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
responses = bind_rows(yes,no) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
#ResponseType = fct_relevel(ResponseType,"individual"), #
Response = fct_relevel(Response,"passive","not passive")) # this is what I want to be
dodge=position_dodge(.9)
ggplot(responses, aes(x=Response,y=Proportion,fill=Condition)) +
geom_bar(stat="identity",position=dodge) +
#geom_errorbar(aes(ymin=YMin,ymax=YMax),width=.2,position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
#scale_alpha_discrete(range = c(1, .4),name="Response type",labels=c("agreement_estimate"="agreement\nestimate")) +
ylab("Proportion of yes responses") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/responses.pdf",width=5,height=3.5)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh)
passive = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
responses = bind_rows(yes,no) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
#ResponseType = fct_relevel(ResponseType,"individual"), #
SentenceType = fct_relevel(Response,"passive","not passive")) # this is what I want to be
dodge=position_dodge(.9)
ggplot(responses, aes(x=SentenceType,y=Proportion,fill=Condition)) +
geom_bar(stat="identity",position=dodge) +
#geom_errorbar(aes(ymin=YMin,ymax=YMax),width=.2,position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
#scale_alpha_discrete(range = c(1, .4),name="Response type",labels=c("agreement_estimate"="agreement\nestimate")) +
ylab("Proportion of yes responses") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/responses.pdf",width=5,height=3.5)
nrow(transformed)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh)
passive = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(SentenceType="passive")
responses = bind_rows(yes,no) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
#ResponseType = fct_relevel(ResponseType,"individual"), #
SentenceType = fct_relevel(SentenceType,"passive","not passive")) # this is what I want to be
nrow(transformed)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh)
passive = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Sentence="passive")
responses = bind_rows(yes,no) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
#ResponseType = fct_relevel(ResponseType,"individual"), #
SentenceType = fct_relevel(Sentence,"passive","not passive")) # this is what I want to be
ggsave("graphs/responses.pdf",width=5,height=3.5)
names(transformed)
nrow(transformed)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh)
passive = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
responses = bind_rows(yes,no) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
#ResponseType = fct_relevel(ResponseType,"individual"), #
SentenceType = fct_relevel(Response,"passive","not passive")) # this is what I want to be
dodge=position_dodge(.9)
ggplot(responses, aes(x=SentenceType,y=Proportion,fill=Condition)) +
geom_bar(stat="identity",position=dodge) +
#geom_errorbar(aes(ymin=YMin,ymax=YMax),width=.2,position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
#scale_alpha_discrete(range = c(1, .4),name="Response type",labels=c("agreement_estimate"="agreement\nestimate")) +
ylab("Proportion of yes responses") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/responses.pdf",width=5,height=3.5)
# bar plot of response proportions alongside agreement estimates
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh)
passive = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
responses = bind_rows(yes,no) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
#ResponseType = fct_relevel(ResponseType,"individual"), #
SentenceType = fct_relevel(Response,"passive","not passive")) # this is what I want to be
dodge=position_dodge(.9)
ggplot(responses, aes(x=Condition,y=Proportion,fill=SentenceType)) +
geom_bar(stat="identity",position=dodge) +
#geom_errorbar(aes(ymin=YMin,ymax=YMax),width=.2,position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
#scale_alpha_discrete(range = c(1, .4),name="Response type",labels=c("agreement_estimate"="agreement\nestimate")) +
ylab("Proportion of yes responses") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/responses.pdf",width=5,height=3.5)
#bar plot of error levels for sentence types in all three conditions
ggplot(transformed, aes(x=Condition, y = difference,fill =SentenceType))+
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Difference in Individual Observation and Population Judgements") +
theme(legend.position="top",legend.direction="vertical")
View(responses)
#bar plot of error levels for sentence types in all three conditions
ggplot(transformed, aes(x=version, y = difference,fill =SentenceType))+
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Difference in Individual Observation and Population Judgements") +
theme(legend.position="top",legend.direction="vertical")
transformed = transformed %>%
mutate(SentenceType = ifelse(header_passive == 1,
"passive",
"not passive"))
ggplot(transformed, aes(x=version, y = difference,fill =))+
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Difference in Individual Observation and Population Judgements") +
theme(legend.position="top",legend.direction="vertical")
ggplot(transformed, aes(x=version, y = difference,fill = SentenceType))+
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Difference in Individual Observation and Population Judgements") +
theme(legend.position="top",legend.direction="vertical")
transformed = transformed %>%
mutate(SentenceType = ifelse(header_passive == 1,
"passive",
"not passive"),
abs_diff = abs(difference))
ggplot(transformed, aes(x=version, y = difference,fill = SentenceType))+
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Difference in Individual Observation and Population Judgements") +
Xlab("Condition") +
theme(legend.position="top",legend.direction="vertical")
ggplot(transformed, aes(x=version, y = difference,fill = SentenceType))+
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Difference in Individual Observation and Population Judgements") +
xlab("Condition") +
theme(legend.position="top",legend.direction="vertical")
transformed = transformed %>%
mutate(SentenceType = ifelse(header_passive == 1,
"passive",
"not passive"),
abs_diff = abs(difference))
ggplot(transformed, aes(x=version, y = abs_diff,fill = SentenceType))+
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Difference in Individual Observation and Population Judgements") +
xlab("Condition") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/posthoc2.pdf",width=5,height=3.5)
transformed = transformed %>%
mutate(SentenceType = ifelse(header_length == 1,
"passive",
"not passive"),
abs_diff = abs(difference))
library(tidyverse)
library(jsonlite)
library(Hmisc)
library(binom)
library(brms)
library(EnvStats)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
theme_set(theme_bw())
cbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7")
source("../../post_hoc/1_falseconsensus/helpers.R")
# load core dataset
d <- read_csv("../../results/1_falseconsensus/main-merged.csv")
# load extra information
metadata = read_csv("../../post_hoc/1_falseconsensus/annotatedstims.csv") %>%
select(Title, version,header_passive, header_sentence_length) %>%
rename(title=Title)
d = d %>%
left_join(metadata,by=c("title","version"))
nonEnglishNativeLanguages <- c("Chinese", "Spanish", "spanish", "Punjabi", "Filipino", "Urdu")
excludedWorkers_nonNative <- unique((d %>%
filter(subject_information.language %in% nonEnglishNativeLanguages))$workerid)
excludedWorkers <- (d %>%
filter((version == "unambiguous_uncovered" & individual_judgment == "yes") |
(version == "unambiguous_covered" & individual_judgment == "no")) %>%
group_by(workerid) %>%
summarise(n = n()) %>%
filter(n > 1))$workerid
d <- d %>%
filter(!(workerid %in% excludedWorkers)) %>%
filter(!(workerid %in% excludedWorkers_nonNative))
transformed <- d %>%
select(workerid,title,version,individual_judgment,population_judgment,confidence,header_passive, header_sentence_length) %>%
group_by(version,title) %>%
mutate(total = n()) %>%
ungroup() %>%
group_by(version,title,individual_judgment,header_passive, header_sentence_length) %>%
mutate(count = n()) %>%
mutate(true_proportion = binom.confint(x = count, n  = total, methods = "exact")$mean * 100,
ci_low = binom.confint(x = count, n  = total, methods = "exact")$lower * 100,
ci_high = binom.confint(x = count, n  = total, methods = "exact")$upper * 100,
agreement_mean = mean(population_judgment)) %>%
mutate(difference = as.numeric(population_judgment) - true_proportion) %>%
mutate(versionPretty = factor(version))
levels(transformed$versionPretty)
levels(transformed$versionPretty) <- c("Controversial", "Covered", "Not\ncovered")
# bar plot of yes response proportions for sentence types in all three conditions
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh)
passive = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
responses = bind_rows(yes,no) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
SentenceType = fct_relevel(Response,"passive","not passive"))
dodge=position_dodge(.9)
ggplot(responses, aes(x=Condition,y=Proportion,fill=SentenceType)) +
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Proportion of yes responses") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/sentencetypeprop.pdf",width=5,height=3.5)
transformed = transformed %>%
mutate(SentenceType = ifelse(header_passive == 1,
"passive",
"not passive"),
abs_diff = abs(difference))
ggplot(transformed, aes(x=version, y = abs_diff,fill = SentenceType))+
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Difference in Individual Observation and Population Judgements") +
xlab("Condition") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/sentencetypeerror.pdf",width=5,height=3.5)
# load core dataset
d <- read_csv("../../results/1_falseconsensus/main-merged.csv")
# load extra information
metadata = read_csv("../../post_hoc/1_falseconsensus/annotatedstims.csv") %>%
select(Title, version,header_passive, header_sentence_length) %>%
rename(title=Title)
d = d %>%
left_join(metadata,by=c("title","version"))
transformed <- d %>%
select(workerid,title,version,individual_judgment,population_judgment,confidence,header_passive, header_sentence_length) %>%
group_by(version,title) %>%
mutate(total = n()) %>%
ungroup() %>%
group_by(version,title,individual_judgment,header_passive, header_sentence_length) %>%
mutate(count = n()) %>%
mutate(true_proportion = binom.confint(x = count, n  = total, methods = "exact")$mean * 100,
ci_low = binom.confint(x = count, n  = total, methods = "exact")$lower * 100,
ci_high = binom.confint(x = count, n  = total, methods = "exact")$upper * 100,
agreement_mean = mean(population_judgment)) %>%
mutate(difference = as.numeric(population_judgment) - true_proportion) %>%
mutate(versionPretty = factor(version))
levels(transformed$versionPretty)
levels(transformed$versionPretty) <- c("Controversial", "Covered", "Not\ncovered")
# bar plot of yes response proportions for sentence types in all three conditions
props = transformed %>%
mutate(passive = case_when(header_passive == 1~ 1,
TRUE ~ 0),
not_passive = case_when(header_passive == 0 ~ 1,
TRUE ~ 0)) %>%
group_by(version) %>%
summarise(ProportionPassive = mean(passive), PassiveCILow=ci.low(passive), PassiveCIHigh=ci.high(passive)) %>%
mutate(PassiveYMin=ProportionPassive-PassiveCILow,PassiveYMax=ProportionPassive+PassiveCIHigh)
passive = props %>%
select(version,ProportionPassive, PassiveYMax, PassiveYMin) %>%
rename(Proportion=ProportionPassive,YMax=PassiveYMax,YMin=PassiveYMin) %>%
mutate(Response="passive")
responses = bind_rows(yes,no) %>%
mutate(Condition = fct_relevel(version,"unambiguous_covered","controversial"),
SentenceType = fct_relevel(Response,"passive","not passive"))
dodge=position_dodge(.9)
ggplot(responses, aes(x=Condition,y=Proportion,fill=SentenceType)) +
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Proportion of yes responses") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/sentencetypeprop.pdf",width=5,height=3.5)
transformed = transformed %>%
mutate(SentenceType = ifelse(header_passive == 1,
"passive",
"not passive"),
abs_diff = abs(difference))
ggplot(transformed, aes(x=version, y = abs_diff,fill = SentenceType))+
geom_bar(stat="identity",position=dodge) +
scale_fill_manual(values=cbPalette,labels=c("unambiguous_covered"="covered","unambiguous_uncovered"="not covered"))  +
ylab("Difference in Individual Observation and Population Judgements") +
xlab("Condition") +
theme(legend.position="top",legend.direction="vertical")
ggsave("graphs/sentencetypeerror.pdf",width=5,height=3.5)
